#!/usr/bin/env python3
"""
–°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ PDF —Ñ–∞–π–ª–∞ —Å –ø—Ä–∞–π—Å-–ª–∏—Å—Ç–æ–º –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞—Ä—Å–µ—Ä–∞
"""

from reportlab.lib import colors
from reportlab.lib.pagesizes import letter, A4
from reportlab.platypus import SimpleDocTemplate, Table, TableStyle, Paragraph, Spacer
from reportlab.lib.styles import getSampleStyleSheet
from reportlab.lib.units import inch
import os

def create_test_pdf():
    """–°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ PDF —Ñ–∞–π–ª–∞ —Å —Ç–∞–±–ª–∏—Ü–µ–π —Ç–æ–≤–∞—Ä–æ–≤"""
    filename = "data/temp/test_price_list.pdf"
    
    # –£–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
    os.makedirs(os.path.dirname(filename), exist_ok=True)
    
    # –°–æ–∑–¥–∞–µ–º –¥–æ–∫—É–º–µ–Ω—Ç
    doc = SimpleDocTemplate(filename, pagesize=A4)
    elements = []
    
    # –°—Ç–∏–ª–∏
    styles = getSampleStyleSheet()
    title_style = styles['Title']
    
    # –ó–∞–≥–æ–ª–æ–≤–æ–∫
    title = Paragraph("–ü–†–ê–ô–°-–õ–ò–°–¢ –ü–†–û–î–£–ö–¢–û–í", title_style)
    elements.append(title)
    elements.append(Spacer(1, 20))
    
    # –ü–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫
    subtitle = Paragraph("–û–û–û '–¢–µ—Å—Ç–æ–≤—ã–π –ü–æ—Å—Ç–∞–≤—â–∏–∫'", styles['Heading2'])
    elements.append(subtitle)
    elements.append(Spacer(1, 20))
    
    # –î–∞–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã
    data = [
        ['‚Ññ', '–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞', '–¶–µ–Ω–∞ (—Ä—É–±)', '–ï–¥–∏–Ω–∏—Ü–∞', '–ö–∞—Ç–µ–≥–æ—Ä–∏—è'],
        ['1', '–ú–æ–ª–æ–∫–æ –∫–æ—Ä–æ–≤—å–µ –ø–∞—Å—Ç–µ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–µ 3.2%', '89.50', '–ª', '–ú–æ–ª–æ—á–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã'],
        ['2', '–•–ª–µ–± –ø—à–µ–Ω–∏—á–Ω—ã–π –±–µ–ª—ã–π', '45.00', '—à—Ç', '–•–ª–µ–±–æ–±—É–ª–æ—á–Ω—ã–µ –∏–∑–¥–µ–ª–∏—è'],
        ['3', '–ú—è—Å–æ –≥–æ–≤—è–¥–∏–Ω–∞ –≤—ã—Å—à–∏–π —Å–æ—Ä—Ç', '750.00', '–∫–≥', '–ú—è—Å–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã'],
        ['4', '–†—ã–±–∞ —Å–µ–º–≥–∞ —Å–≤–µ–∂–∞—è', '1200.00', '–∫–≥', '–†—ã–±–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã'],
        ['5', '–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å –º–æ–ª–æ–¥–æ–π', '25.00', '–∫–≥', '–û–≤–æ—â–∏'],
        ['6', '–ê–ø–µ–ª—å—Å–∏–Ω—ã –∏–º–ø–æ—Ä—Ç–Ω—ã–µ', '120.00', '–∫–≥', '–§—Ä—É–∫—Ç—ã'],
        ['7', '–ú–∞—Å–ª–æ –ø–æ–¥—Å–æ–ª–Ω–µ—á–Ω–æ–µ —Ä–∞—Ñ–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ', '95.00', '–ª', '–ú–∞—Å–ª–æ–∂–∏—Ä–æ–≤—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã'],
        ['8', '–°—ã—Ä —Ä–æ—Å—Å–∏–π—Å–∫–∏–π —Ç–≤–µ—Ä–¥—ã–π', '380.00', '–∫–≥', '–ú–æ–ª–æ—á–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã'],
        ['9', '–ö—É—Ä–∏–Ω—ã–µ —è–π—Ü–∞ C1', '85.00', '–¥–µ—Å—è—Ç–æ–∫', '–Ø–∏—á–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã'],
        ['10', '–ì—Ä–µ—á–∫–∞ —è–¥—Ä–∏—Ü–∞', '110.00', '–∫–≥', '–ö—Ä—É–ø—ã'],
        ['11', '–°–∞—Ö–∞—Ä-–ø–µ—Å–æ–∫ –±–µ–ª—ã–π', '55.00', '–∫–≥', '–°–∞—Ö–∞—Ä'],
        ['12', '–ß–∞–π —á–µ—Ä–Ω—ã–π –±–∞–π—Ö–æ–≤—ã–π', '250.00', '–ø–∞—á–∫–∞', '–ß–∞–π –∏ –∫–æ—Ñ–µ']
    ]
    
    # –°–æ–∑–¥–∞–µ–º —Ç–∞–±–ª–∏—Ü—É
    table = Table(data, colWidths=[0.8*inch, 3*inch, 1.2*inch, 1*inch, 2*inch])
    
    # –°—Ç–∏–ª—å —Ç–∞–±–ª–∏—Ü—ã
    table.setStyle(TableStyle([
        # –ó–∞–≥–æ–ª–æ–≤–æ–∫
        ('BACKGROUND', (0, 0), (-1, 0), colors.grey),
        ('TEXTCOLOR', (0, 0), (-1, 0), colors.whitesmoke),
        ('ALIGN', (0, 0), (-1, -1), 'CENTER'),
        ('FONTNAME', (0, 0), (-1, 0), 'Helvetica-Bold'),
        ('FONTSIZE', (0, 0), (-1, 0), 10),
        
        # –î–∞–Ω–Ω—ã–µ
        ('BACKGROUND', (0, 1), (-1, -1), colors.beige),
        ('TEXTCOLOR', (0, 1), (-1, -1), colors.black),
        ('FONTNAME', (0, 1), (-1, -1), 'Helvetica'),
        ('FONTSIZE', (0, 1), (-1, -1), 9),
        
        # –ì—Ä–∞–Ω–∏—Ü—ã
        ('GRID', (0, 0), (-1, -1), 1, colors.black),
        ('VALIGN', (0, 0), (-1, -1), 'MIDDLE'),
        
        # –í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ —Ü–µ–Ω –ø–æ –ø—Ä–∞–≤–æ–º—É –∫—Ä–∞—é
        ('ALIGN', (2, 1), (2, -1), 'RIGHT'),
        ('ALIGN', (0, 1), (0, -1), 'CENTER'),  # –ù–æ–º–µ—Ä–∞ –ø–æ —Ü–µ–Ω—Ç—Ä—É
    ]))
    
    elements.append(table)
    
    # –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–µ
    elements.append(Spacer(1, 30))
    info = Paragraph("<b>–ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:</b><br/>–¢–µ–ª: +7 (999) 123-45-67<br/>Email: test@supplier.ru", styles['Normal'])
    elements.append(info)
    
    # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º PDF
    doc.build(elements)
    
    print(f"‚úÖ –¢–µ—Å—Ç–æ–≤—ã–π PDF —Å–æ–∑–¥–∞–Ω: {filename}")
    return filename

if __name__ == "__main__":
    try:
        # –ü–æ–ø—Ä–æ–±—É–µ–º –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å reportlab
        import reportlab
        create_test_pdf()
    except ImportError:
        print("‚ùå –î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è PDF –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å reportlab:")
        print("pip install reportlab")
        
        # –°–æ–∑–¥–∞–µ–º –ø—Ä–æ—Å—Ç–æ–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª –∫–∞–∫ fallback
        print("üìù –°–æ–∑–¥–∞—é —Ç–µ–∫—Å—Ç–æ–≤—É—é –≤–µ—Ä—Å–∏—é...")
        content = """–ü–†–ê–ô–°-–õ–ò–°–¢ –ü–†–û–î–£–ö–¢–û–í
–û–û–û '–¢–µ—Å—Ç–æ–≤—ã–π –ü–æ—Å—Ç–∞–≤—â–∏–∫'

‚Ññ    –ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞                      –¶–µ–Ω–∞ (—Ä—É–±)  –ï–¥–∏–Ω–∏—Ü–∞      –ö–∞—Ç–µ–≥–æ—Ä–∏—è
1    –ú–æ–ª–æ–∫–æ –∫–æ—Ä–æ–≤—å–µ –ø–∞—Å—Ç–µ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–µ 3.2%     89.50       –ª            –ú–æ–ª–æ—á–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã
2    –•–ª–µ–± –ø—à–µ–Ω–∏—á–Ω—ã–π –±–µ–ª—ã–π                    45.00       —à—Ç           –•–ª–µ–±–æ–±—É–ª–æ—á–Ω—ã–µ –∏–∑–¥–µ–ª–∏—è
3    –ú—è—Å–æ –≥–æ–≤—è–¥–∏–Ω–∞ –≤—ã—Å—à–∏–π —Å–æ—Ä—Ç               750.00      –∫–≥           –ú—è—Å–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã
4    –†—ã–±–∞ —Å–µ–º–≥–∞ —Å–≤–µ–∂–∞—è                       1200.00     –∫–≥           –†—ã–±–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã
5    –ö–∞—Ä—Ç–æ—Ñ–µ–ª—å –º–æ–ª–æ–¥–æ–π                       25.00       –∫–≥           –û–≤–æ—â–∏
"""
        
        os.makedirs("data/temp", exist_ok=True)
        with open("data/temp/test_price_list.txt", "w", encoding="utf-8") as f:
            f.write(content)
        
        print("‚úÖ –°–æ–∑–¥–∞–Ω —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª: data/temp/test_price_list.txt")